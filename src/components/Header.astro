---
// src/components/Header.astro
import ArrowIcon from "../assets/arrow_horizontal.svg?raw";
---
<header 
  class="fixed top-8 left-0 right-0 grid grid-cols-[1fr_auto_1fr] items-center z-[1000] px-12 max-[768px]:flex max-[768px]:flex-col max-[768px]:gap-3 max-[768px]:px-4 max-[768px]:top-4 max-[500px]:px-2 max-[500px]:gap-2"
  role="banner">
  
  <!-- Navigation par numéros -->
  <nav 
    class="flex gap-2 justify-self-start max-[768px]:justify-center max-[768px]:gap-1.5 max-[500px]:gap-0.5"
    aria-label="Navigation par pages">
    <button 
      class="page-btn active w-[38px] h-[38px] bg-[rgba(36,37,38,0.5)] backdrop-blur-[10px] border border-white/10 rounded-[10px] text-white text-[0.9rem] font-medium cursor-pointer flex items-center justify-center gap-2 transition-all duration-300 hover:bg-[rgba(50,51,52,0.7)] max-[768px]:w-[32px] max-[768px]:h-[32px] max-[768px]:text-[0.8rem] max-[500px]:w-[24px] max-[500px]:h-[24px] max-[500px]:text-[0.7rem] max-[500px]:rounded-[6px]" 
      data-page="0" 
      data-label="Accueil"
      aria-label="Page 1 : Accueil"
      aria-current="page">
      <span class="page-number">1</span>
      <span class="page-label">Accueil</span>
    </button>
    <button 
      class="page-btn w-[38px] h-[38px] bg-[rgba(36,37,38,0.5)] backdrop-blur-[10px] border border-white/10 rounded-[10px] text-white text-[0.9rem] font-medium cursor-pointer flex items-center justify-center gap-2 transition-all duration-300 hover:bg-[rgba(50,51,52,0.7)] max-[768px]:w-[32px] max-[768px]:h-[32px] max-[768px]:text-[0.8rem] max-[500px]:w-[24px] max-[500px]:h-[24px] max-[500px]:text-[0.7rem] max-[500px]:rounded-[6px]" 
      data-page="1" 
      data-label="Accessibilité"
      aria-label="Page 2 : Accessibilité aux soins">
      <span class="page-number">2</span>
      <span class="page-label">Accessibilité</span>
    </button>
    <button 
      class="page-btn w-[38px] h-[38px] bg-[rgba(36,37,38,0.5)] backdrop-blur-[10px] border border-white/10 rounded-[10px] text-white text-[0.9rem] font-medium cursor-pointer flex items-center justify-center gap-2 transition-all duration-300 hover:bg-[rgba(50,51,52,0.7)] max-[768px]:w-[32px] max-[768px]:h-[32px] max-[768px]:text-[0.8rem] max-[500px]:w-[24px] max-[500px]:h-[24px] max-[500px]:text-[0.7rem] max-[500px]:rounded-[6px]" 
      data-page="2" 
      data-label="Répartition"
      aria-label="Page 3 : Répartition des professionnels">
      <span class="page-number">3</span>
      <span class="page-label">Répartition</span>
    </button>
    <button 
      class="page-btn w-[38px] h-[38px] bg-[rgba(36,37,38,0.5)] backdrop-blur-[10px] border border-white/10 rounded-[10px] text-white text-[0.9rem] font-medium cursor-pointer flex items-center justify-center gap-2 transition-all duration-300 hover:bg-[rgba(50,51,52,0.7)] max-[768px]:w-[32px] max-[768px]:h-[32px] max-[768px]:text-[0.8rem] max-[500px]:w-[24px] max-[500px]:h-[24px] max-[500px]:text-[0.7rem] max-[500px]:rounded-[6px]" 
      data-page="3" 
      data-label="Comparaison"
      aria-label="Page 4 : Comparaison des données">
      <span class="page-number">4</span>
      <span class="page-label">Comparaison</span>
    </button>
    <button 
      class="page-btn w-[38px] h-[38px] bg-[rgba(36,37,38,0.5)] backdrop-blur-[10px] border border-white/10 rounded-[10px] text-white text-[0.9rem] font-medium cursor-pointer flex items-center justify-center gap-2 transition-all duration-300 hover:bg-[rgba(50,51,52,0.7)] max-[768px]:w-[32px] max-[768px]:h-[32px] max-[768px]:text-[0.8rem] max-[500px]:w-[24px] max-[500px]:h-[24px] max-[500px]:text-[0.7rem] max-[500px]:rounded-[6px]" 
      data-page="4" 
      data-label="Conclusion"
      aria-label="Page 5 : Conclusion">
      <span class="page-number">5</span>
      <span class="page-label">Conclusion</span>
    </button>
  </nav>

  <!-- Boutons flèches -->
  <div 
    class="flex gap-4 justify-self-center max-[768px]:justify-center max-[768px]:gap-2 max-[500px]:gap-1"
    role="navigation"
    aria-label="Navigation séquentielle">
    <button 
      id="prev-btn" 
      class="arrow-btn h-[38px] w-[76px] bg-[rgba(36,37,38,0.5)] backdrop-blur-[10px] border border-white/10 rounded-[10px] text-white cursor-pointer flex items-center justify-center transition-[background] duration-200 hover:bg-[rgba(50,51,52,0.7)] disabled:opacity-30 disabled:cursor-not-allowed max-[768px]:h-[32px] max-[768px]:w-[64px] max-[500px]:h-[24px] max-[500px]:w-[48px] max-[500px]:rounded-[6px]" 
      aria-label="Page précédente"
      aria-disabled="true"
      disabled
      style="transform: scaleX(-1);">
      <span aria-hidden="true">
        <Fragment set:html={ArrowIcon} />
      </span>
    </button>
    <button 
      id="next-btn" 
      class="arrow-btn h-[38px] w-[76px] bg-[rgba(36,37,38,0.5)] backdrop-blur-[10px] border border-white/10 rounded-[10px] text-white cursor-pointer flex items-center justify-center transition-[background] duration-200 hover:bg-[rgba(50,51,52,0.7)] disabled:opacity-30 disabled:cursor-not-allowed max-[768px]:h-[32px] max-[768px]:w-[64px] max-[500px]:h-[24px] max-[500px]:w-[48px] max-[500px]:rounded-[6px]" 
      aria-label="Page suivante"
      aria-disabled="false">
      <span aria-hidden="true">
        <Fragment set:html={ArrowIcon} />
      </span>
    </button>
  </div>
</header>

<style>
  :global(.arrow-btn svg) {
    width: 1rem;
    height: 1rem;
    stroke: currentColor;
    stroke-width: .5;
  }

  @media (max-width: 500px) {
    :global(.arrow-btn svg) {
      width: 0.65rem;
      height: 0.65rem;
    }
  }

  /* Styles pour les boutons de page */
  :global(.page-btn) {
    overflow: hidden;
    white-space: nowrap;
  }

  /* Label caché par défaut */
  :global(.page-btn .page-label) {
    display: none;
  }

  /* Bouton actif : uniquement au-dessus de 800px */
  @media (min-width: 801px) {
    :global(.page-btn.active) {
      background: rgb(255, 140, 66) !important;
      backdrop-filter: none !important;
      border: none !important;
      color: white;
      width: auto !important;
      padding-left: 0.75rem;
      padding-right: 0.75rem;
    }

    :global(.page-btn.active .page-label) {
      display: inline;
    }
  }

  /* En dessous de 800px : pas de label */
  @media (max-width: 800px) {
    :global(.page-btn.active) {
      background: rgb(255, 140, 66) !important;
      backdrop-filter: none !important;
      border: none !important;
      color: white;
    }

    :global(.page-btn.active .page-label) {
      display: none;
    }
  }
</style>

